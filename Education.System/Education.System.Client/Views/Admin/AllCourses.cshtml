@model List<Education.System.Core.Application.Course>
@{
    ViewData["Title"] = "All Courses";
}
<!-- Delete Confirmation Modal -->
<partial name="_ConfirmationAlert" />
<div class="d-flex w-100 justify-content-end pe-5">
    <a class="custom-nav-btn" asp-action="AddingCourse">Add Course</a>
</div>
@if (Model.Count > 0)
{
    <div class="w-75 d-flex flex-wrap gap-4 m-auto mt-4">
        @foreach (var course in Model)
        {
            <div class="bg-light text-dark border border-1 border-light rounded-3 d-flex flex-column align-items-center gap-3 p-2"
                style="width:22%;">
                <header
                    class="w-100 p-2 pb-3 border-bottom border-1 border-dark d-flex justify-content-end align-items-center gap-2">
                    <a asp-action="EditCourse" asp-route-id="@course.Id">
                        <img title="Edit Course" src="/icons/edit.png" width="24" height="24" alt="edit icon"
                            class="edit-icon-post" />
                    </a>
                    <button type="button" class="btn-close text-danger bg-danger deleteButton" aria-label="Delete"
                        data-toggle="modal" data-target="#deleteConfirmationModal" data-course-id="@course.Id">
                        <form id="deleteForm" method="post" asp-action="DeleteCourse" class="d-none">
                            <input type="hidden" id="courseIdInput" name="courseId" value="@course.Id" />
                        </form>
                    </button>
                </header>
                <div class="w-100 fw-bold fs-3 d-flex justify-content-center align-items-center mb-3">
                    @course.CourseName
                </div>
            </div>
        }
    </div>
}
else
{
    <p>no courses</p>
}

@section Scripts {

    <script>
        $(document).ready(function () {

            // Trigger the modal and set the courseId
            $('.deleteButton').on('click', function () {
                $('#deleteConfirmationModal').modal('show'); // Show the modal
            });

            // Handle the confirmation of delete
            $('#confirmDeleteButton').on('click', function () {
                $('#deleteForm').submit();
            })
        });
    </script>
}
